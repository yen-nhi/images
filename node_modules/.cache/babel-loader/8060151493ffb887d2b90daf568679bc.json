{"ast":null,"code":"import _slicedToArray from \"/home/nhi/react Images/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";\n\nvar _jsxFileName = \"/home/nhi/react Images/src/App.js\",\n    _s = $RefreshSig$();\n\nimport Canvas from \"./components/Canvas\";\nimport classes from './App.module.css';\nimport { useState } from 'react';\nimport { storage } from './firebase/firebase';\nimport { getDownloadURL, uploadBytesResumable, ref } from \"firebase/storage\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nfunction App() {\n  _s();\n\n  var _useState = useState(''),\n      _useState2 = _slicedToArray(_useState, 2),\n      image = _useState2[0],\n      setImage = _useState2[1];\n\n  var _useState3 = useState(),\n      _useState4 = _slicedToArray(_useState3, 2),\n      imageUrl = _useState4[0],\n      setImageUrl = _useState4[1];\n\n  var _useState5 = useState(false),\n      _useState6 = _slicedToArray(_useState5, 2),\n      finishUpload = _useState6[0],\n      setFinishUpload = _useState6[1];\n\n  var fileChangeHandler = function fileChangeHandler(e) {\n    setImage(e.target.files[0]);\n  };\n\n  var fileUploadHandler = function fileUploadHandler() {\n    var storageRef = ref(storage, \"/images/\".concat(image.name));\n    var uploadTask = uploadBytesResumable(storageRef, image);\n    uploadTask.on('state_changed', function (snapshot) {}, function (err) {\n      console.log(err);\n    }, function () {\n      getDownloadURL(uploadTask.snapshot.ref).then(function (url) {\n        console.log('app', url);\n        setImageUrl(url);\n        setFinishUpload(true);\n      });\n    });\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: classes.app,\n    children: [/*#__PURE__*/_jsxDEV(\"input\", {\n      type: \"file\",\n      onChange: fileChangeHandler,\n      className: classes.chooseFile\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 36,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      type: \"button\",\n      onClick: fileUploadHandler,\n      children: \"Upload Image\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 37,\n      columnNumber: 9\n    }, this), finishUpload && /*#__PURE__*/_jsxDEV(Canvas, {\n      imageUrl: imageUrl\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 38,\n      columnNumber: 26\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 35,\n    columnNumber: 7\n  }, this);\n}\n\n_s(App, \"kYVJuwv7M64FEDeDw/o877owkTk=\");\n\n_c = App;\n;\nexport default App;\n\nvar _c;\n\n$RefreshReg$(_c, \"App\");","map":{"version":3,"sources":["/home/nhi/react Images/src/App.js"],"names":["Canvas","classes","useState","storage","getDownloadURL","uploadBytesResumable","ref","App","image","setImage","imageUrl","setImageUrl","finishUpload","setFinishUpload","fileChangeHandler","e","target","files","fileUploadHandler","storageRef","name","uploadTask","on","snapshot","err","console","log","then","url","app","chooseFile"],"mappings":";;;;;AAAA,OAAOA,MAAP,MAAmB,qBAAnB;AACA,OAAOC,OAAP,MAAoB,kBAApB;AACA,SAASC,QAAT,QAAyB,OAAzB;AACA,SAASC,OAAT,QAAwB,qBAAxB;AACA,SAASC,cAAT,EAAyBC,oBAAzB,EAA+CC,GAA/C,QAA0D,kBAA1D;;;AAEA,SAASC,GAAT,GAAe;AAAA;;AAEb,kBAA0BL,QAAQ,CAAC,EAAD,CAAlC;AAAA;AAAA,MAAOM,KAAP;AAAA,MAAcC,QAAd;;AACA,mBAAgCP,QAAQ,EAAxC;AAAA;AAAA,MAAOQ,QAAP;AAAA,MAAiBC,WAAjB;;AACA,mBAAwCT,QAAQ,CAAC,KAAD,CAAhD;AAAA;AAAA,MAAOU,YAAP;AAAA,MAAqBC,eAArB;;AAED,MAAMC,iBAAiB,GAAG,SAApBA,iBAAoB,CAACC,CAAD,EAAO;AAChCN,IAAAA,QAAQ,CAACM,CAAC,CAACC,MAAF,CAASC,KAAT,CAAe,CAAf,CAAD,CAAR;AACA,GAFD;;AAIA,MAAMC,iBAAiB,GAAG,SAApBA,iBAAoB,GAAM;AAE7B,QAAMC,UAAU,GAAGb,GAAG,CAACH,OAAD,oBAAqBK,KAAK,CAACY,IAA3B,EAAtB;AACA,QAAMC,UAAU,GAAGhB,oBAAoB,CAACc,UAAD,EAAaX,KAAb,CAAvC;AACAa,IAAAA,UAAU,CAACC,EAAX,CAAc,eAAd,EAA+B,UAACC,QAAD,EAAc,CAAE,CAA/C,EACA,UAACC,GAAD,EAAS;AAACC,MAAAA,OAAO,CAACC,GAAR,CAAYF,GAAZ;AAAiB,KAD3B,EAEA,YAAM;AACJpB,MAAAA,cAAc,CAACiB,UAAU,CAACE,QAAX,CAAoBjB,GAArB,CAAd,CACCqB,IADD,CACM,UAAAC,GAAG,EAAI;AACXH,QAAAA,OAAO,CAACC,GAAR,CAAY,KAAZ,EAAmBE,GAAnB;AACAjB,QAAAA,WAAW,CAACiB,GAAD,CAAX;AACAf,QAAAA,eAAe,CAAC,IAAD,CAAf;AACD,OALD;AAMD,KATD;AAUD,GAdF;;AAiBC,sBACI;AAAK,IAAA,SAAS,EAAEZ,OAAO,CAAC4B,GAAxB;AAAA,4BACE;AAAO,MAAA,IAAI,EAAC,MAAZ;AAAmB,MAAA,QAAQ,EAAEf,iBAA7B;AAAgD,MAAA,SAAS,EAAEb,OAAO,CAAC6B;AAAnE;AAAA;AAAA;AAAA;AAAA,YADF,eAEE;AAAQ,MAAA,IAAI,EAAC,QAAb;AAAsB,MAAA,OAAO,EAAEZ,iBAA/B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,YAFF,EAGGN,YAAY,iBAAI,QAAC,MAAD;AAAQ,MAAA,QAAQ,EAAEF;AAAlB;AAAA;AAAA;AAAA;AAAA,YAHnB;AAAA;AAAA;AAAA;AAAA;AAAA,UADJ;AAOD;;GAlCQH,G;;KAAAA,G;AAkCR;AAED,eAAeA,GAAf","sourcesContent":["import Canvas from \"./components/Canvas\";\nimport classes from './App.module.css';\nimport { useState } from 'react';\nimport { storage } from './firebase/firebase';\nimport { getDownloadURL, uploadBytesResumable, ref } from \"firebase/storage\";\n\nfunction App() {\n\n  const [image, setImage] = useState('');\n  const [imageUrl, setImageUrl] = useState();\n  const [finishUpload, setFinishUpload] = useState(false);\n\n const fileChangeHandler = (e) => {\n  setImage(e.target.files[0])\n }\n\n const fileUploadHandler = () => {\n   \n    const storageRef = ref(storage, `/images/${image.name}`);\n    const uploadTask = uploadBytesResumable(storageRef, image);\n    uploadTask.on('state_changed', (snapshot) => {},\n    (err) => {console.log(err)},\n    () => {\n      getDownloadURL(uploadTask.snapshot.ref)\n      .then(url => {\n        console.log('app', url);\n        setImageUrl(url);\n        setFinishUpload(true);\n      })\n    }\n )};\n\n\n  return(\n      <div className={classes.app}>\n        <input type=\"file\" onChange={fileChangeHandler} className={classes.chooseFile}/>\n        <button type=\"button\" onClick={fileUploadHandler}>Upload Image</button>\n        {finishUpload && <Canvas imageUrl={imageUrl}/>}\n      </div>\n  )\n};\n\nexport default App;"]},"metadata":{},"sourceType":"module"}