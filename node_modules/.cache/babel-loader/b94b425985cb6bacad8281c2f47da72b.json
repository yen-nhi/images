{"ast":null,"code":"import _toConsumableArray from \"/home/nhi/react Images/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";\nimport _createForOfIteratorHelper from \"/home/nhi/react Images/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createForOfIteratorHelper.js\";\nimport _slicedToArray from \"/home/nhi/react Images/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";\n\nvar _jsxFileName = \"/home/nhi/react Images/src/components/Canvas.js\",\n    _s = $RefreshSig$();\n\n// import React, { useRef, useEffect, useState } from 'react';\n// import catsImg from '../images/cats.jpg';\n// import BoxForm from \"./BoxForm\";\n// import classes from './Canvas.module.css';\n// const Canvas = () => {\n//     const canvas = useRef();\n//     const box = useRef();\n//     let ctx = null;\n//     let currentBox =  null; \n//     let image = new Image();\n//     image.src = catsImg;\n//     const [newDraw, setNewDraw] = useState(false);\n//     const [formPosition, setFormPosition] = useState(0);\n//     const [boxesArr, setBoxesArr] = useState([]);\n//     fetch('https://images-4bdb1-default-rtdb.asia-southeast1.firebasedatabase.app/images.json')\n//     .then(res => res.json)\n//     .then(data => {\n//       setBoxesArr(data)\n//     });\n//     const drawBox = (box) => {\n//       const borderColor = 'black';\n//       const borderWidth = 1;\n//       const { x, y, w, h } = box;\n//       ctx.beginPath();\n//       ctx.strokeStyle = borderColor;\n//       ctx.lineWidth = borderWidth;\n//       ctx.rect(x, y, w, h);\n//       ctx.stroke();\n//       ctx.font = \"16px arial\";\n//       ctx.strokeText('hello', x, y - 5);\n//     }\n//     const drawBoxes = () => {\n//       if (ctx !== null) {\n//         ctx.clearRect(0, 0, canvas.current.clientWidth, canvas.current.clientHeight);  \n//         ctx.drawImage(image, 0, 0);\n//         boxesArr.map(box => drawBox(box));\n//         if (currentBox !== null) {\n//           drawBox(currentBox);\n//         }     \n//       }\n//     }\n//     const handleMouseDown = e => {\n//       const x = parseInt(e.nativeEvent.offsetX - canvas.current.clientLeft);\n//       const y = parseInt(e.nativeEvent.offsetY - canvas.current.clientTop);\n//       currentBox = {x, y, w: 30, h: 30};\n//       drawBoxes();\n//     }  \n//     const handleMouseUp = e => {\n//       if (currentBox !== null) {\n//         console.log('Done!')\n//         setNewDraw(true);\n//         currentBox = null;\n//       }\n//       drawBoxes();\n//     }  \n//     const handleMouseOut = e => {      \n//       currentBox = null;\n//       drawBoxes();\n//     }\n//     const handleMouseMove = e => {\n//       if (currentBox !== null) {\n//         const { x, y, w, h } = currentBox;\n//         const mouseX = parseInt(e.nativeEvent.offsetX - canvas.current.clientLeft);\n//         const mouseY = parseInt(e.nativeEvent.offsetY - canvas.current.clientTop);\n//         currentBox = {x, y, w: mouseX - x, h: mouseY - y};\n//         drawBoxes();\n//       }\n//     }\n//     // initialize the canvas context\n//     useEffect(() => {\n//       // dynamically assign the width and height to canvas\n//       const canvasEle = canvas.current;\n//       canvasEle.width = canvasEle.clientWidth;\n//       canvasEle.height = canvasEle.clientHeight;\n//       // get context of the canvas\n//       ctx = canvasEle.getContext(\"2d\");\n//     }, []);\n//     useEffect(() => {   \n//       drawBoxes();\n//       console.log(boxesArr);\n//     }, []);\n//     return (\n//       <div className={classes.page}>\n//         <canvas\n//           onMouseDown={handleMouseDown} \n//           onMouseUp={handleMouseUp}\n//           onMouseOut={handleMouseOut}\n//           onMouseMove={handleMouseMove}\n//           ref={canvas}> \n//         </canvas>\n//         {newDraw && <BoxForm \n//           setNewDraw={() => setNewDraw(false)}\n//           x={formPosition}/>}\n//       </div>\n//     );\n//   }\n//   export default Canvas;\nimport classes from './Canvas.module.css';\nimport React, { useRef, useEffect, useState } from 'react';\nimport catsImg from '../images/cats.jpg';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function Canvas() {\n  _s();\n\n  var _this = this;\n\n  var canvas = useRef();\n  var currentBox = null;\n  var image = new Image(60, 45);\n  image.src = catsImg;\n\n  var _useState = useState([]),\n      _useState2 = _slicedToArray(_useState, 2),\n      boxes = _useState2[0],\n      setBoxes = _useState2[1];\n\n  var drawBox = function drawBox(ctx, box) {\n    var borderColor = 'black';\n    var borderWidth = 1;\n    var x = box.x,\n        y = box.y,\n        w = box.w,\n        h = box.h;\n    ctx.beginPath();\n    ctx.strokeStyle = borderColor;\n    ctx.lineWidth = borderWidth;\n    ctx.rect(x, y, w, h);\n    ctx.stroke();\n  };\n\n  var drawBoxes = function drawBoxes() {\n    var canvasEle = canvas.current;\n    canvasEle.width = canvasEle.clientWidth;\n    canvasEle.height = canvasEle.clientHeight;\n    var ctx = canvasEle.getContext(\"2d\");\n\n    if (ctx !== null) {\n      ctx.clearRect(0, 0, canvas.current.clientWidth, canvas.current.clientHeight);\n      ctx.drawImage(image, 0, 0);\n\n      var _iterator = _createForOfIteratorHelper(boxes),\n          _step;\n\n      try {\n        for (_iterator.s(); !(_step = _iterator.n()).done;) {\n          var box = _step.value;\n          drawBox(ctx, box);\n        }\n      } catch (err) {\n        _iterator.e(err);\n      } finally {\n        _iterator.f();\n      }\n\n      if (currentBox !== null) {\n        drawBox(ctx, currentBox);\n      }\n    }\n  };\n\n  var handleMouseDown = function handleMouseDown(e) {\n    var x = parseInt(e.nativeEvent.offsetX - canvas.current.clientLeft);\n    var y = parseInt(e.nativeEvent.offsetY - canvas.current.clientTop);\n    currentBox = {\n      x: x,\n      y: y,\n      w: 30,\n      h: 30\n    };\n    drawBoxes();\n  };\n\n  var handleMouseUp = function handleMouseUp(e) {\n    if (currentBox !== null) {\n      boxes.push(currentBox);\n      currentBox = null;\n      setBoxes(_toConsumableArray(boxes));\n    }\n\n    drawBoxes();\n  };\n\n  var handleMouseOut = function handleMouseOut(e) {\n    currentBox = null;\n    drawBoxes();\n  };\n\n  var handleMouseMove = function handleMouseMove(e) {\n    if (currentBox !== null) {\n      var _currentBox = currentBox,\n          x = _currentBox.x,\n          y = _currentBox.y,\n          w = _currentBox.w,\n          h = _currentBox.h;\n      var mouseX = parseInt(e.nativeEvent.offsetX - canvas.current.clientLeft);\n      var mouseY = parseInt(e.nativeEvent.offsetY - canvas.current.clientTop);\n      currentBox = {\n        x: x,\n        y: y,\n        w: mouseX - x,\n        h: mouseY - y\n      };\n      drawBoxes();\n    }\n  }; // initialize the canvas context\n\n\n  useEffect(function () {// dynamically assign the width and height to canvas\n  }, []);\n  useEffect(function () {\n    drawBoxes();\n  }, []);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: classes.page,\n    children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n      children: \"Hello CodeSandbox\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 199,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n      children: \"Start editing to see some magic happen!\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 200,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      children: /*#__PURE__*/_jsxDEV(\"canvas\", {\n        onMouseDown: handleMouseDown,\n        onMouseUp: handleMouseUp,\n        onMouseOut: handleMouseOut,\n        onMouseMove: handleMouseMove,\n        ref: canvas\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 202,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 201,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      children: boxes.map(function (box) {\n        return /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [box.x, \" \", box.y, \" \"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 213,\n          columnNumber: 13\n        }, _this);\n      })\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 210,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 198,\n    columnNumber: 5\n  }, this);\n}\n\n_s(Canvas, \"nFzoC42kAvCv60Kecd+//cdoLNQ=\");\n\n_c = Canvas;\n\nvar _c;\n\n$RefreshReg$(_c, \"Canvas\");","map":{"version":3,"sources":["/home/nhi/react Images/src/components/Canvas.js"],"names":["classes","React","useRef","useEffect","useState","catsImg","Canvas","canvas","currentBox","image","Image","src","boxes","setBoxes","drawBox","ctx","box","borderColor","borderWidth","x","y","w","h","beginPath","strokeStyle","lineWidth","rect","stroke","drawBoxes","canvasEle","current","width","clientWidth","height","clientHeight","getContext","clearRect","drawImage","handleMouseDown","e","parseInt","nativeEvent","offsetX","clientLeft","offsetY","clientTop","handleMouseUp","push","handleMouseOut","handleMouseMove","mouseX","mouseY","page","map"],"mappings":"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","sourcesContent":["// import React, { useRef, useEffect, useState } from 'react';\n// import catsImg from '../images/cats.jpg';\n// import BoxForm from \"./BoxForm\";\n// import classes from './Canvas.module.css';\n\n\n// const Canvas = () => {\n//     const canvas = useRef();\n//     const box = useRef();\n//     let ctx = null;\n//     let currentBox =  null; \n//     let image = new Image();\n//     image.src = catsImg;\n  \n//     const [newDraw, setNewDraw] = useState(false);\n//     const [formPosition, setFormPosition] = useState(0);\n//     const [boxesArr, setBoxesArr] = useState([]);\n\n//     fetch('https://images-4bdb1-default-rtdb.asia-southeast1.firebasedatabase.app/images.json')\n//     .then(res => res.json)\n//     .then(data => {\n//       setBoxesArr(data)\n//     });\n\n//     const drawBox = (box) => {\n//       const borderColor = 'black';\n//       const borderWidth = 1;\n//       const { x, y, w, h } = box;\n//       ctx.beginPath();\n//       ctx.strokeStyle = borderColor;\n//       ctx.lineWidth = borderWidth;\n//       ctx.rect(x, y, w, h);\n//       ctx.stroke();\n//       ctx.font = \"16px arial\";\n//       ctx.strokeText('hello', x, y - 5);\n//     }\n//     const drawBoxes = () => {\n//       if (ctx !== null) {\n//         ctx.clearRect(0, 0, canvas.current.clientWidth, canvas.current.clientHeight);  \n//         ctx.drawImage(image, 0, 0);\n//         boxesArr.map(box => drawBox(box));\n//         if (currentBox !== null) {\n//           drawBox(currentBox);\n//         }     \n//       }\n//     }\n  \n//     const handleMouseDown = e => {\n//       const x = parseInt(e.nativeEvent.offsetX - canvas.current.clientLeft);\n//       const y = parseInt(e.nativeEvent.offsetY - canvas.current.clientTop);\n//       currentBox = {x, y, w: 30, h: 30};\n//       drawBoxes();\n//     }  \n  \n//     const handleMouseUp = e => {\n//       if (currentBox !== null) {\n//         console.log('Done!')\n//         setNewDraw(true);\n//         currentBox = null;\n//       }\n//       drawBoxes();\n//     }  \n  \n//     const handleMouseOut = e => {      \n//       currentBox = null;\n//       drawBoxes();\n//     }\n  \n//     const handleMouseMove = e => {\n//       if (currentBox !== null) {\n//         const { x, y, w, h } = currentBox;\n  \n//         const mouseX = parseInt(e.nativeEvent.offsetX - canvas.current.clientLeft);\n//         const mouseY = parseInt(e.nativeEvent.offsetY - canvas.current.clientTop);\n//         currentBox = {x, y, w: mouseX - x, h: mouseY - y};\n//         drawBoxes();\n//       }\n//     }\n  \n  \n//     // initialize the canvas context\n//     useEffect(() => {\n//       // dynamically assign the width and height to canvas\n//       const canvasEle = canvas.current;\n//       canvasEle.width = canvasEle.clientWidth;\n//       canvasEle.height = canvasEle.clientHeight;\n   \n//       // get context of the canvas\n//       ctx = canvasEle.getContext(\"2d\");\n//     }, []);\n  \n//     useEffect(() => {   \n//       drawBoxes();\n//       console.log(boxesArr);\n//     }, []);\n  \n//     return (\n//       <div className={classes.page}>\n//         <canvas\n//           onMouseDown={handleMouseDown} \n//           onMouseUp={handleMouseUp}\n//           onMouseOut={handleMouseOut}\n//           onMouseMove={handleMouseMove}\n//           ref={canvas}> \n//         </canvas>\n//         {newDraw && <BoxForm \n//           setNewDraw={() => setNewDraw(false)}\n//           x={formPosition}/>}\n//       </div>\n//     );\n//   }\n  \n//   export default Canvas;\n\nimport classes from './Canvas.module.css';\nimport React, { useRef, useEffect, useState } from 'react';\nimport catsImg from '../images/cats.jpg';\n\nexport default function Canvas() {\n  const canvas = useRef();\n  let currentBox =  null; \n  let image = new Image(60, 45);\n  image.src = catsImg;\n  const [boxes, setBoxes] = useState([]);\n  \n  const drawBox = (ctx, box) => {\n    const borderColor = 'black';\n    const borderWidth = 1;\n    const { x, y, w, h } = box;\n    ctx.beginPath();\n    ctx.strokeStyle = borderColor;\n    ctx.lineWidth = borderWidth;\n    ctx.rect(x, y, w, h);\n    ctx.stroke();\n\n  }\n\n  const drawBoxes = () => {\n    const canvasEle = canvas.current;\n    canvasEle.width = canvasEle.clientWidth;\n    canvasEle.height = canvasEle.clientHeight;\n    let ctx = canvasEle.getContext(\"2d\");\n\n    if (ctx !== null) {\n      ctx.clearRect(0, 0, canvas.current.clientWidth, canvas.current.clientHeight);  \n      ctx.drawImage(image, 0, 0);\n      for (let box of boxes) {\n        drawBox(ctx, box);\n      }\n      if (currentBox !== null) {\n        drawBox(ctx, currentBox);\n      }     \n    }\n  }\n\n  const handleMouseDown = e => {\n    const x = parseInt(e.nativeEvent.offsetX - canvas.current.clientLeft);\n    const y = parseInt(e.nativeEvent.offsetY - canvas.current.clientTop);\n    currentBox = {x, y, w: 30, h: 30};\n    drawBoxes();\n  }  \n\n  const handleMouseUp = e => {\n    if (currentBox !== null) {\n      boxes.push(currentBox);\n      currentBox = null;\n      setBoxes([...boxes]);\n    }\n    drawBoxes();\n  }  \n\n  const handleMouseOut = e => {\n    currentBox = null\n    drawBoxes();\n  }\n\n  const handleMouseMove = e => {\n    if (currentBox !== null) {\n      const { x, y, w, h } = currentBox;\n      const mouseX = parseInt(e.nativeEvent.offsetX - canvas.current.clientLeft);\n      const mouseY = parseInt(e.nativeEvent.offsetY - canvas.current.clientTop);\n      currentBox = {x, y, w: mouseX - x, h: mouseY - y};\n      drawBoxes();\n    }\n  }\n\n\n  // initialize the canvas context\n  useEffect(() => {\n    // dynamically assign the width and height to canvas\n  }, []);\n\n  useEffect(() => {   \n    drawBoxes();\n  }, []);\n\n  return (\n    <div className={classes.page}>\n      <h1>Hello CodeSandbox</h1>\n      <h2>Start editing to see some magic happen!</h2>\n      <div>\n        <canvas \n          onMouseDown={handleMouseDown} \n          onMouseUp={handleMouseUp}\n          onMouseOut={handleMouseOut}\n          onMouseMove={handleMouseMove}\n          ref={canvas}>    \n        </canvas>\n      </div>\n      <div>\n        {boxes.map(\n          box => (\n            <div>{box.x} {box.y} </div>\n          )\n        )}\n      </div>\n    </div>\n  );\n}"]},"metadata":{},"sourceType":"module"}