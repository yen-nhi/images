{"ast":null,"code":"import _slicedToArray from \"/home/nhi/react Images/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";\n\nvar _jsxFileName = \"/home/nhi/react Images/src/components/Canvas.js\",\n    _this = this,\n    _s = $RefreshSig$();\n\nimport React, { useRef, useEffect, useState } from 'react';\nimport catsImg from '../images/cats.jpg';\nimport BoxForm from \"./BoxForm\";\nimport './Canvas.module.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nvar Canvas = function Canvas() {\n  _s();\n\n  var canvas = useRef();\n  var box = useRef();\n  var ctx = null;\n  var currentBox = null;\n  var boxArray = [{\n    x: 127,\n    y: 55,\n    w: 171,\n    h: 142\n  }];\n  var image = new Image();\n  image.src = catsImg;\n\n  var _useState = useState(false),\n      _useState2 = _slicedToArray(_useState, 2),\n      newDraw = _useState2[0],\n      setNewDraw = _useState2[1];\n\n  var drawBox = function drawBox(box) {\n    var borderColor = 'black';\n    var borderWidth = 1;\n    var x = box.x,\n        y = box.y,\n        w = box.w,\n        h = box.h;\n    ctx.beginPath();\n    ctx.strokeStyle = borderColor;\n    ctx.lineWidth = borderWidth;\n    ctx.rect(x, y, w, h);\n    ctx.stroke();\n    ctx.font = \"16px arial\";\n    ctx.strokeText(\"Hello World\", x, y - 5);\n  };\n\n  var drawBoxes = function drawBoxes() {\n    if (ctx !== null) {\n      ctx.clearRect(0, 0, canvas.current.clientWidth, canvas.current.clientHeight);\n      ctx.drawImage(image, 0, 0);\n      boxArray.map(function (box) {\n        return drawBox(box);\n      });\n\n      if (currentBox !== null) {\n        drawBox(currentBox);\n      }\n    }\n  };\n\n  var handleMouseDown = function handleMouseDown(e) {\n    var x = parseInt(e.nativeEvent.offsetX - canvas.current.clientLeft);\n    var y = parseInt(e.nativeEvent.offsetY - canvas.current.clientTop);\n    currentBox = {\n      x: x,\n      y: y,\n      w: 30,\n      h: 30\n    };\n    drawBoxes();\n  };\n\n  var handleMouseUp = function handleMouseUp(e) {\n    if (currentBox !== null) {\n      boxArray.push(currentBox);\n      currentBox = null;\n    }\n\n    drawBoxes();\n  };\n\n  var handleMouseOut = function handleMouseOut(e) {\n    console.log('Done!');\n    setNewDraw(true);\n    currentBox = null;\n    drawBoxes();\n  };\n\n  var handleMouseMove = function handleMouseMove(e) {\n    if (currentBox !== null) {\n      var _currentBox = currentBox,\n          x = _currentBox.x,\n          y = _currentBox.y,\n          w = _currentBox.w,\n          h = _currentBox.h;\n      var mouseX = parseInt(e.nativeEvent.offsetX - canvas.current.clientLeft);\n      var mouseY = parseInt(e.nativeEvent.offsetY - canvas.current.clientTop);\n      currentBox = {\n        x: x,\n        y: y,\n        w: mouseX - x,\n        h: mouseY - y\n      };\n      drawBoxes();\n    }\n  }; // initialize the canvas context\n\n\n  useEffect(function () {\n    // dynamically assign the width and height to canvas\n    var canvasEle = canvas.current;\n    canvasEle.width = canvasEle.clientWidth;\n    canvasEle.height = canvasEle.clientHeight; // get context of the canvas\n\n    ctx = canvasEle.getContext(\"2d\");\n  }, []);\n  useEffect(function () {\n    drawBoxes();\n    console.log(boxArray);\n  }, []);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"page\",\n    children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n      children: \"Hello CodeSandbox\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 94,\n      columnNumber: 9\n    }, _this), /*#__PURE__*/_jsxDEV(\"h2\", {\n      children: \"Start editing to see some magic happen!\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 95,\n      columnNumber: 9\n    }, _this), /*#__PURE__*/_jsxDEV(\"canvas\", {\n      onMouseDown: handleMouseDown,\n      onMouseUp: handleMouseUp,\n      onMouseOut: handleMouseOut,\n      onMouseMove: handleMouseMove,\n      ref: canvas\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 96,\n      columnNumber: 9\n    }, _this), newDraw && /*#__PURE__*/_jsxDEV(BoxForm, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 103,\n      columnNumber: 21\n    }, _this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 93,\n    columnNumber: 7\n  }, _this);\n};\n\n_s(Canvas, \"5T/DNOZu9I5VPgu12xX/8NwngVE=\");\n\n_c = Canvas;\nexport default Canvas;\n\nvar _c;\n\n$RefreshReg$(_c, \"Canvas\");","map":{"version":3,"sources":["/home/nhi/react Images/src/components/Canvas.js"],"names":["React","useRef","useEffect","useState","catsImg","BoxForm","Canvas","canvas","box","ctx","currentBox","boxArray","x","y","w","h","image","Image","src","newDraw","setNewDraw","drawBox","borderColor","borderWidth","beginPath","strokeStyle","lineWidth","rect","stroke","font","strokeText","drawBoxes","clearRect","current","clientWidth","clientHeight","drawImage","map","handleMouseDown","e","parseInt","nativeEvent","offsetX","clientLeft","offsetY","clientTop","handleMouseUp","push","handleMouseOut","console","log","handleMouseMove","mouseX","mouseY","canvasEle","width","height","getContext"],"mappings":"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","sourcesContent":["import React, { useRef, useEffect, useState } from 'react';\nimport catsImg from '../images/cats.jpg';\nimport BoxForm from \"./BoxForm\";\nimport './Canvas.module.css';\n\n\nconst Canvas = () => {\n    const canvas = useRef();\n    const box = useRef();\n    let ctx = null;\n    let currentBox =  null; \n    let boxArray = [{x: 127, y: 55, w: 171, h: 142}];\n    let image = new Image();\n    image.src = catsImg;\n  \n    const [newDraw, setNewDraw] = useState(false);\n    \n    const drawBox = (box) => {\n      const borderColor = 'black';\n      const borderWidth = 1;\n      const { x, y, w, h } = box;\n      ctx.beginPath();\n      ctx.strokeStyle = borderColor;\n      ctx.lineWidth = borderWidth;\n      ctx.rect(x, y, w, h);\n      ctx.stroke();\n      ctx.font = \"16px arial\";\n      ctx.strokeText(\"Hello World\", x, y - 5);\n    }\n    const drawBoxes = () => {\n      if (ctx !== null) {\n        ctx.clearRect(0, 0, canvas.current.clientWidth, canvas.current.clientHeight);  \n        ctx.drawImage(image, 0, 0);\n        boxArray.map(box => drawBox(box));\n        if (currentBox !== null) {\n          drawBox(currentBox);\n        }     \n      }\n    }\n  \n    const handleMouseDown = e => {\n      const x = parseInt(e.nativeEvent.offsetX - canvas.current.clientLeft);\n      const y = parseInt(e.nativeEvent.offsetY - canvas.current.clientTop);\n      currentBox = {x, y, w: 30, h: 30};\n      drawBoxes();\n    }  \n  \n    const handleMouseUp = e => {\n      if (currentBox !== null) {\n        boxArray.push(currentBox);\n        currentBox = null;\n      }\n      drawBoxes();\n    }  \n  \n    const handleMouseOut = e => {\n      console.log('Done!')\n      setNewDraw(true);\n      currentBox = null\n      drawBoxes();\n      \n    }\n  \n    const handleMouseMove = e => {\n      if (currentBox !== null) {\n        const { x, y, w, h } = currentBox;\n  \n        const mouseX = parseInt(e.nativeEvent.offsetX - canvas.current.clientLeft);\n        const mouseY = parseInt(e.nativeEvent.offsetY - canvas.current.clientTop);\n        currentBox = {x, y, w: mouseX - x, h: mouseY - y};\n        drawBoxes();\n      }\n    }\n  \n  \n    // initialize the canvas context\n    useEffect(() => {\n      // dynamically assign the width and height to canvas\n      const canvasEle = canvas.current;\n      canvasEle.width = canvasEle.clientWidth;\n      canvasEle.height = canvasEle.clientHeight;\n   \n      // get context of the canvas\n      ctx = canvasEle.getContext(\"2d\");\n    }, []);\n  \n    useEffect(() => {   \n      drawBoxes();\n      console.log(boxArray);\n    }, []);\n  \n    return (\n      <div className=\"page\">\n        <h1>Hello CodeSandbox</h1>\n        <h2>Start editing to see some magic happen!</h2>\n        <canvas\n          onMouseDown={handleMouseDown} \n          onMouseUp={handleMouseUp}\n          onMouseOut={handleMouseOut}\n          onMouseMove={handleMouseMove}\n          ref={canvas}> \n        </canvas>\n        {newDraw && <BoxForm/>}\n      </div>\n    );\n  }\n  \n  export default Canvas;"]},"metadata":{},"sourceType":"module"}